{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\source\\\\one-nwc-debug\\\\WebApplication1\\\\Project1\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { ApplicationUserService } from '../../../service/ApplicationUserService';\nimport { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/ApplicationUserService\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"primeng/toolbar\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/tooltip\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"../../forms/registration/user-registration/user-registration.component\";\nconst _c0 = [\"dialog\"];\n\nfunction UserListComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 13);\n    i0.ɵɵtext(2, \"\\u041B\\u043E\\u0433\\u0438\\u043D\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 13);\n    i0.ɵɵtext(4, \"\\u0418\\u043C\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 13);\n    i0.ɵɵtext(6, \"\\u041E\\u0442\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 13);\n    i0.ɵɵtext(8, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 13);\n    i0.ɵɵtext(10, \"Email\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction UserListComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 14)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const user_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", user_r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.middleName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r3.email);\n  }\n}\n\nexport let UserListComponent = /*#__PURE__*/(() => {\n  class UserListComponent {\n    constructor(applicationUserService, messageService) {\n      this.applicationUserService = applicationUserService;\n      this.messageService = messageService;\n      this.blockingMask = false;\n      this.users = [];\n      this.userDialogVisible = false;\n      this.editMode = false;\n    }\n\n    ngOnInit() {\n      this.onLoad();\n    }\n\n    onLoad() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          _this.users = yield _this.applicationUserService.getUsers(null);\n        } catch (e) {\n          throw e;\n        }\n      })();\n    }\n\n    startCreateUser() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2.userDialogVisible = true;\n        _this2.editMode = false;\n\n        _this2.dialog.init();\n      })();\n    }\n\n    startUpdateUser() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        _this3.userDialogVisible = true;\n        _this3.editMode = true;\n\n        _this3.dialog.init(_this3.selectedUser.id);\n      })();\n    }\n\n    deleteUser() {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        _this4.blockingMask = true;\n\n        try {\n          yield _this4.applicationUserService.deleteUser(_this4.selectedUser.id);\n\n          _this4.messageService.add({\n            severity: 'info',\n            summary: 'Пользователь удален',\n            detail: '',\n            life: 10\n          });\n\n          yield _this4.onLoad();\n        } finally {\n          _this4.blockingMask = false;\n        }\n      })();\n    }\n\n  }\n\n  UserListComponent.ɵfac = function UserListComponent_Factory(t) {\n    return new (t || UserListComponent)(i0.ɵɵdirectiveInject(i1.ApplicationUserService), i0.ɵɵdirectiveInject(i2.MessageService));\n  };\n\n  UserListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserListComponent,\n    selectors: [[\"app-user-list\"]],\n    viewQuery: function UserListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dialog = _t.first);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([ApplicationUserService, MessageService])],\n    decls: 15,\n    vars: 5,\n    consts: [[1, \"v-flex\"], [1, \"p-toolbar-group-left\"], [2, \"color\", \"#003274\", \"font-size\", \"20px\", \"font-family\", \"Arial\"], [\"pButton\", \"\", \"icon\", \"pi pi-refresh\", \"pTooltip\", \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u0443\", 3, \"click\"], [1, \"splitter\"], [\"pButton\", \"\", \"icon\", \"pi pi-plus\", \"pTooltip\", \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\", 3, \"click\"], [\"pButton\", \"\", \"icon\", \"pi pi-trash\", \"pTooltip\", \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\", 1, \"ui-button-danger\", 3, \"disabled\", \"click\"], [1, \"v-flex-grow\"], [\"selectionMode\", \"single\", 3, \"value\", \"selection\", \"selectionChange\"], [\"pTemplate\", \"header\", \"style\", \"color: #003274; font-size: 14px; font-family: Arial;\"], [\"pTemplate\", \"body\"], [3, \"editMode\", \"_visible\", \"result\", \"hide\"], [\"dialog\", \"\"], [2, \"color\", \"#003274\", \"font-size\", \"14px\", \"font-family\", \"Arial\"], [3, \"pSelectableRow\"]],\n    template: function UserListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"p-toolbar\")(2, \"div\", 1)(3, \"span\", 2);\n        i0.ɵɵtext(4, \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_5_listener() {\n          return ctx.onLoad();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_7_listener() {\n          return ctx.startCreateUser();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_8_listener() {\n          return ctx.deleteUser();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(9, \"div\", 7)(10, \"p-table\", 8);\n        i0.ɵɵlistener(\"selectionChange\", function UserListComponent_Template_p_table_selectionChange_10_listener($event) {\n          return ctx.selectedUser = $event;\n        });\n        i0.ɵɵtemplate(11, UserListComponent_ng_template_11_Template, 11, 0, \"ng-template\", 9);\n        i0.ɵɵtemplate(12, UserListComponent_ng_template_12_Template, 11, 6, \"ng-template\", 10);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"app-user-registration\", 11, 12);\n        i0.ɵɵlistener(\"result\", function UserListComponent_Template_app_user_registration_result_13_listener() {\n          return ctx.onLoad();\n        })(\"hide\", function UserListComponent_Template_app_user_registration_hide_13_listener() {\n          return ctx.userDialogVisible = false;\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"disabled\", !ctx.selectedUser || ctx.selectedUser.isAdmin);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", ctx.users)(\"selection\", ctx.selectedUser);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"editMode\", ctx.editMode)(\"_visible\", ctx.userDialogVisible);\n      }\n    },\n    directives: [i3.Toolbar, i4.ButtonDirective, i5.Tooltip, i6.Table, i2.PrimeTemplate, i6.SelectableRow, i7.UserRegistrationComponent],\n    styles: [\"\"]\n  });\n  return UserListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}