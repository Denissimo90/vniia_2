{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\source\\\\one-nwc-debug\\\\WebApplication1\\\\Project1\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { ApplicationUser } from \"../../../dto/ApplicationUser\";\nimport { ApplicationUserService } from \"../../../service/ApplicationUserService\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/ApplicationUserService\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"primeng/button\";\nexport let LoginPageComponent = /*#__PURE__*/(() => {\n  class LoginPageComponent {\n    constructor(applicationUserService) {\n      this.applicationUserService = applicationUserService;\n      this.loading = false;\n      this.user = new ApplicationUser();\n      this.setUser = new EventEmitter();\n    }\n\n    ngOnInit() {\n      console.log('login-page init');\n    }\n\n    auth() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.loading = true;\n\n        try {\n          if (!_this.user.username || !_this.user.password) {\n            console.log('Для авторизации необходимо имя пользователя/email и пароль');\n          } else {\n            _this.user = yield _this.applicationUserService.auth(_this.user);\n\n            _this.login();\n          }\n        } catch (e) {\n          console.log('Ошибка при авторизации: ' + e);\n        } finally {\n          _this.loading = false;\n        }\n      })();\n    }\n\n    login() {\n      this.setUser.emit(this.user);\n    }\n\n  }\n\n  LoginPageComponent.ɵfac = function LoginPageComponent_Factory(t) {\n    return new (t || LoginPageComponent)(i0.ɵɵdirectiveInject(i1.ApplicationUserService));\n  };\n\n  LoginPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginPageComponent,\n    selectors: [[\"app-login-page\"]],\n    outputs: {\n      setUser: \"setUser\"\n    },\n    features: [i0.ɵɵProvidersFeature([ApplicationUserService])],\n    decls: 15,\n    vars: 4,\n    consts: [[1, \"app-center\"], [1, \"login-form\", 3, \"keydown\"], [2, \"width\", \"100%\", \"text-align\", \"center\"], [2, \"color\", \"#003274\", \"font-size\", \"20px\", \"font-family\", \"Arial\"], [1, \"login-form-line\"], [2, \"color\", \"#003274\"], [\"type\", \"text\", \"name\", \"username\", \"placeholder\", \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043B\\u043E\\u0433\\u0438\\u043D\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"password\", \"placeholder\", \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\", 3, \"ngModel\", \"ngModelChange\"], [\"pButton\", \"\", \"label\", \"\\u0412\\u043E\\u0439\\u0442\\u0438\", 1, \"button-orange\", 3, \"click\"]],\n    template: function LoginPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵlistener(\"keydown\", function LoginPageComponent_Template_div_keydown_1_listener($event) {\n          return $event.key == \"Enter\" && ctx.loading == false ? ctx.auth() : null;\n        });\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"h5\", 3);\n        i0.ɵɵtext(4, \"\\u0410\\u0412\\u0422\\u041E\\u0420\\u0418\\u0417\\u0410\\u0426\\u0418\\u042F\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"span\", 5);\n        i0.ɵɵtext(7, \"\\u041B\\u043E\\u0433\\u0438\\u043D\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginPageComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.user.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 4)(10, \"span\", 5);\n        i0.ɵɵtext(11, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function LoginPageComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.user.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 4)(14, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function LoginPageComponent_Template_button_click_14_listener() {\n          return ctx.auth();\n        });\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"disabledForm\", ctx.loading);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.username);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      }\n    },\n    directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.ButtonDirective],\n    styles: [\".login-form[_ngcontent-%COMP%]{padding:20px;width:500px;height:280px;background:#6CACE4;border-radius:50px;border:1px #5796ce solid}.login-form-line[_ngcontent-%COMP%]{display:grid;width:100%;margin-top:20px}button[_ngcontent-%COMP%]{height:40px;width:80px;place-self:center}\"]\n  });\n  return LoginPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}