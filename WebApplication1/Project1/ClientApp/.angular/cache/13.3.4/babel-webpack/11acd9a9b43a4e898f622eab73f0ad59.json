{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\source\\\\one-nwc-debug\\\\WebApplication1\\\\Project1\\\\ClientApp\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { ManufactureService } from '../../../service/ManufactureService';\nimport { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../service/ManufactureService\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"primeng/toolbar\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"primeng/tooltip\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"../../forms/registration/manufacture-registration/manufacture-registration.component\";\nimport * as i8 from \"primeng/messages\";\nconst _c0 = [\"t\"];\n\nfunction ManufactureListComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 12);\n    i0.ɵɵtext(2, \"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ManufactureListComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 13)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const manufacture_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"pSelectableRow\", manufacture_r3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(manufacture_r3.caption);\n  }\n}\n\nexport let ManufactureListComponent = /*#__PURE__*/(() => {\n  class ManufactureListComponent {\n    constructor(manufactureService, messageService) {\n      this.manufactureService = manufactureService;\n      this.messageService = messageService;\n      this.blockingMask = false;\n      this.userDialogVisible = false;\n      this.manufactures = [];\n    }\n\n    ngOnInit() {\n      this.onLoad();\n    }\n\n    onLoad() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        try {\n          const manufactures = yield _this.manufactureService.getManufactures();\n          _this.manufactures = manufactures;\n        } catch (e) {\n          throw e;\n        }\n      })();\n    }\n\n    startCreateManufacture() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2.userDialogVisible = true;\n      })();\n    }\n\n    deleteManufacture() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        _this3.blockingMask = true;\n\n        try {\n          yield _this3.manufactureService.deleteManufacture(_this3.manufacture.id);\n\n          _this3.messageService.add({\n            severity: 'info',\n            summary: 'Позиция удалена',\n            detail: '',\n            life: 10\n          });\n\n          _this3.htmlTable.removeRowsById(_this3.manufacture.id, 'Позиция удалена');\n        } finally {\n          _this3.blockingMask = false;\n        }\n      })();\n    }\n\n  }\n\n  ManufactureListComponent.ɵfac = function ManufactureListComponent_Factory(t) {\n    return new (t || ManufactureListComponent)(i0.ɵɵdirectiveInject(i1.ManufactureService), i0.ɵɵdirectiveInject(i2.MessageService));\n  };\n\n  ManufactureListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ManufactureListComponent,\n    selectors: [[\"app-manufacture-list\"]],\n    viewQuery: function ManufactureListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.htmlTable = _t.first);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([ManufactureService, MessageService])],\n    decls: 14,\n    vars: 5,\n    consts: [[1, \"v-flex\"], [1, \"p-toolbar-group-left\"], [2, \"color\", \"#003274\", \"font-size\", \"20px\", \"font-family\", \"Arial\"], [\"pButton\", \"\", \"icon\", \"pi pi-refresh\", \"pTooltip\", \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0442\\u0430\\u0431\\u043B\\u0438\\u0446\\u0443\", 3, \"click\"], [1, \"splitter\"], [1, \"v-flex-grow\"], [\"selectionMode\", \"single\", 3, \"value\", \"selection\", \"selectionChange\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [3, \"userId\", \"_visible\", \"result\", \"hide\"], [\"dialog\", \"\"], [3, \"value\", \"valueChange\"], [2, \"color\", \"#003274\", \"font-size\", \"14px\", \"font-family\", \"Arial\"], [3, \"pSelectableRow\"]],\n    template: function ManufactureListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"p-toolbar\")(2, \"div\", 1)(3, \"span\", 2);\n        i0.ɵɵtext(4, \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u0440\\u0435\\u0434\\u043F\\u0440\\u0438\\u044F\\u0442\\u0438\\u0439\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function ManufactureListComponent_Template_button_click_5_listener() {\n          return ctx.onLoad();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"div\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"p-table\", 6);\n        i0.ɵɵlistener(\"selectionChange\", function ManufactureListComponent_Template_p_table_selectionChange_8_listener($event) {\n          return ctx.manufacture = $event;\n        });\n        i0.ɵɵtemplate(9, ManufactureListComponent_ng_template_9_Template, 3, 0, \"ng-template\", 7);\n        i0.ɵɵtemplate(10, ManufactureListComponent_ng_template_10_Template, 3, 2, \"ng-template\", 8);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(11, \"app-manufacture-registration\", 9, 10);\n        i0.ɵɵlistener(\"result\", function ManufactureListComponent_Template_app_manufacture_registration_result_11_listener() {\n          return ctx.onLoad();\n        })(\"hide\", function ManufactureListComponent_Template_app_manufacture_registration_hide_11_listener() {\n          return ctx.userDialogVisible = false;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p-messages\", 11);\n        i0.ɵɵlistener(\"valueChange\", function ManufactureListComponent_Template_p_messages_valueChange_13_listener($event) {\n          return ctx.msgs = $event;\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"value\", ctx.manufactures)(\"selection\", ctx.manufacture);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"userId\", ctx.manufacture == null ? null : ctx.manufacture.id)(\"_visible\", ctx.userDialogVisible);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", ctx.msgs);\n      }\n    },\n    directives: [i3.Toolbar, i4.ButtonDirective, i5.Tooltip, i6.Table, i2.PrimeTemplate, i6.SelectableRow, i7.ManufactureRegistrationComponent, i8.Messages],\n    styles: [\"\"]\n  });\n  return ManufactureListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}